\chapter{Proponowane rozwi±zanie}
\label{cha:rozwiazanie}

W rozdziale tym przedstawiono informacje .

%---------------------------------------------------------------------------

\section{Model narciarza i ¶rodowiska}
\label{sec:model}

W zaproponowanym rozwi±zaniu trzeba by³a podj±æ pewne decyzje odno¶nie reprezentacji ¶rodowiska oraz narciarza.
Zosta³o przyjête, ¿e stok traktowany jest jako p³aszczyzna, która jest nachylona pod okre¶lonym przez sta³± $\alpha$ k±tem do powierzchni ziemi. Za³o¿enie co do p³askiej powierzchni jest tylko ograniczeniem przyjêtym do testów. Umo¿liwia to ³atwiejsz± analizê wyników niezaburzonych zmianami nachylenia terenu. Jednak stworzony program mo¿e zostaæ zmodyfikowany tak, aby zamodelowaæ bardziej skomplikowan± powierzchniê. 
Narciarz traktowany jest jako punkt materialny o masie m. 
%---------------------------------------------------------------------------

\section{Opis matematyczny modelu}
\label{sec:matematycznyModel}

m - masa\\
g - wspó³czynnik grawitacji\\
$\alpha$ - k±t nachylenia powierzchni stoku do powierzchni ziemi\\

Si³a grawitacji dzia³aj±ca na obiekt o masie m:\\
$$Q = mg$$

Si³a ta mo¿e zostaæ roz³o¿ona na dwie si³y sk³adowe wzglêdem powierzchni stoku. Narciarz poruszaj±cy siê w dó³ stoku przypomina klasyczny przyk³ad punktu materialnego staczaj±cego siê po równi pochy³ej.\\
Sk³adowa si³y grawitacji równoleg³a do powierzchni stoku:\\
$$mg\sin\alpha$$
jest to si³a ¶ci±gaj±ca narciarza w dó³ stoku

Sk³adowa si³y grawitacji prostopad³a do powierzchni stoku:\\
$$ F_{n} = mg\cos\alpha $$

Warto¶æ tej si³y wp³ywa na warto¶æ si³y tarcia dzia³aj±cej na narciarza:\\
$$ F_{f} = \mu F_{n} = \mu mg\cos\alpha $$

Oprócz si³y tarcia uwzglêdniamy równie¿ inn± si³ê oporu jak± jest si³a oporu powietrza. Zale¿y ona od prêdko¶ci poruszania siê obiektu. Prêdko¶æ bêdziemy wyra¿aæ jako pierwsz± pochodn± po³o¿enia - $ \dot{x} $:\\
$$ F_{d} = k_{1}\dot{x} + k_{2}\dot{x}^2 $$

Za³o¿enia, które narzucane s± na sta³e $ k_{1} $ oraz $ k_{2} $:\\
$$
\left\{ \begin{array}{rl}
 k_{2} = 0  &\mbox{ $v \le B$} \\ 
 k_{1} = 0 &\mbox{ $v \geq  B$} 
\end{array} \right. 
$$\\
gdzie $ B $:\\
$$ B = 4 \frac{m}{s} $$

Ograniczenie to zosta³o zaczerpniête z pracy ???? (Aerodynamic-Drag) i opisane w rozdziale ????

Wspó³czynnik $ k_1 $ ....\\
$$ k_1 = ... $$

Wspó³czynnik $ k_2 $ zosta³ opisany w ????\\
$$ k_2 = \frac{1}{2} C \rho A $$

gdzie:\\
$ C $ - wspó³czynnik oporu\\
$ \rho $ - gêsto¶æ powietrza\\
$ A $ - powierzchnia przednia narciarza prostopad³a do kieruku przep³ywu, a zatem prostopad³a do wektora prêdko¶ci narciarza

%---------------------------------------------------------------------------

\section{Numeryczne rozwi±zanie problemu}
\label{sec:numeryczneRozwiazanie}

Rozpatruj±c wszystkie si³y dzia³aj±ce na narciarza równoleg³e do powierzchni stoku, a wiêc powoduj±ce jego ruch w dó³, otrzymujemy nastêpuj±ce równanie:

$$ ma=mgsin\alpha-\mu mgcos\alpha-k_{1}\dot{x} - k_{2}\dot{x}^{2} $$

Wyra¼my teraz przyspieszenie jako drug± pochodn± po³o¿enia:

$$ a = \ddot{x} $$

Podstawiaj±c do równania:

$$ m\ddot{x}=mgsin\alpha-\mu mgcos\alpha-k_{1}\dot{x} - k_{2}\dot{x}^{2} $$

Zatem po podzieleniu przez m:

$$ \ddot{x}=gsin\alpha-\mu gcos\alpha-\frac{k_{1}}{m}\dot{x} - \frac{k_{2}}{m}\dot{x}^{2} $$

Aby rozwi±zaæ to równanie numerycznie, wprowadzamy now± zmienn± v (odpowiadaj±c± prêdko¶ci):

$$ v = \dot{x} $$

Otrzymujemy nastêpuj±ce równania:\\
$$
\left\{ \begin{array}{rl}
\dot{v} = &gsin\alpha-\mu gcos\alpha-\frac{k_{1}}{m}v - \frac{k_{2}}{m}v^{2} \\
v = &\dot{x}
\end{array} \right. 
$$\\

Pamiêtamy przy tym, ¿e:\\
$$
\left\{ \begin{array}{rl}
 k_{2} = 0  &\mbox{ $v \le B$} \\ 
 k_{1} = 0 &\mbox{ $v \geq  B$} 
\end{array} \right. 
$$\\

Powy¿szy uk³ad równañ wystarczy wykorzystaæ w dostêpnych w wielu jêzykach funkcjach bibliotecznych do rozwi±zywania równañ ró¿niczkowych zwyczajnych. W naszym przypadku wykorzysta³y¶my funkcjê dopri (Numerical integration of ODE using Dormand-Prince RK method) z biblioteki Numeric Javascript.

\subsection{Rozwi±zanie w 3D}
Powy¿szy uk³ad równañ opisuje poruszanie siê punktu materialnego po równi pochy³ej. Jednak w przypadku narciarza przemieszczaj±cego siê po stoku musimy uwzglêdniæ równie¿ mo¿liwo¶æ poruszania siê w poprzek stoku, a nie tylko w dó³.\\
Za³ó¿my, ¿e narciarz porusza siê tylko po liniach prostych. \\
Rozpatrzmy teraz jak bêdzie wygl±da³ uk³ad si³ dzia³aj±cych na narciarza:\\

% obrazek

Na naszego narciarza dzia³aj± si³y: grawitacji - w kierunku pionowym oraz si³y oporu - w kierunku linii jazdy narciarza. Je¶li rozpatrzymy teraz uk³ad wspó³rzêdnych zorientowany wzglêdem kierunku jazdy, musimy najpierw zrzutowaæ si³ê grawitacji otrzymuj±c si³ê ¶ci±gaj±ca narciarza:

$$
g\sin\alpha*sinus
$$

gdzie sinus to:

%-----------------------SINUS-------------------%

Zatem nasze równanie ruchu bêdzie wygl±da³o nastêpuj±co:

$$
\ddot{x} = g\sin\alpha*sinus - (\mu N + \frac{k_1}{m}\dot{x} + \frac{k_2}{m}\dot{x}^2 )
$$

gdzie N to si³a nacisku narciarza, która pozostaje taka sama jak w przypadku 2D:

$$
N = gcos\alpha
$$

Transformuj±c powy¿sze równanie na uk³ad wspó³rzêdnych zorientowany wzd³u¿ i wszerz stoku otrzymamy nastêpj±ce równania:

% sprawdzic x i y 

$$
\left\{ \begin{array}{rl}
\ddot{x_x} = &(g*\sin\alpha*sinus - (\mu*N + \frac{k_1}{m}\dot{x} + \frac{k_2}{m}\dot{x}^2))*sinus\\
\ddot{x_y} = &(g*\sin\alpha*sinus - (\mu*N + \frac{k_1}{m}\dot{x} + \frac{k_2}{m}\dot{x}^2))*cosinus
\end{array} \right. 
$$\\

Po wprowadzeniu jak poprzednio dodatkowych zmiennych, w tym wypadku prêdko¶ci $v_x$ i $v_y$ oraz pamiêtaniu o zale¿no¶ci miêdzy nimi a pochodn± przemieszczenia:

$$
\left\{ \begin{array}{rl}
v_x = &\dot{x_x}\\
v_y = &\dot{x_y}\\
\dot{x} = &\sqrt{v_x^2 +v_y^2}
\end{array} \right.
$$

otrzymujemy:

$$
\left\{ \begin{array}{rl}
v_x = &\dot{x_x}\\
v_y = &\dot{x_y}\\
\dot{v_x} = &(g*\sin\alpha*sinus - (\mu*N + \frac{k_1}{m}\dot{x} + \frac{k_2}{m}\dot{x}^2))*sinus\\
\dot{v_y} = &(g*\sin\alpha*sinus - (\mu*N + \frac{k_1}{m}\dot{x} + \frac{k_2}{m}\dot{x}^2))*cosinus
\end{array} \right. 
$$\\


%---------------wzory razem z zakrêtami - gdzie?--------

$$
\left\{\begin{array}{rl} 
  v_x=\dot{x_x} \\
  v_y=\dot{x_y} \\
 \dot{v_x} = gsin\alpha - (\dot{x_x}^2 +\dot{x_y}^2)^{\frac{1}{2}} \kappa \dot{x_y} sgn(\dot{\varphi}) - gsin\alpha \frac{\dot{x_y}^2}{\dot{x_x}^2 +\dot{x_y}^2} - \frac{(F_f + F_d) }{m}\frac{\dot{x_x}}{(\dot{x_x}^2 +\dot{x_y}^2)^{\frac{1}{2}}} \\
 \dot{v_y} = (\dot{x_x}^2 +\dot{x_y}^2)^{\frac{1}{2}} \kappa \dot{x_x} sgn(\dot{\varphi}) + gsin\alpha \frac{\dot{x_x}} {\dot{x_x}^2 +\dot{x_y}^2} - \frac{(F_f + F_d)}{m}\frac{\dot{x_y}}{(\dot{x_x}^2 +\dot{x_y}^2)^{\frac{1}{2}}} 
\end{array}\right.
$$\\
%---------------------------------------------------------------------------

\section{Optymalizacja toru przejazdu}
\label{sec:optymalizacja}

%---------------------------------------------------------------------------

\section{Architektura systemu}
\label{sec:architektura}

%---------------------------------------------------------------------------

